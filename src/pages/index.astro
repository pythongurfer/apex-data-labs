---
import Layout from '~/layouts/PageLayout.astro';
import Hero from '~/components/widgets/Hero.astro';
import Features2 from '~/components/widgets/Features2.astro';
import { getCollection } from 'astro:content';
import heroMainImage from '~/assets/images/data_stairs.jpg'; // Asegúrate de que esta imagen exista

const posts = (await getCollection('post'))
  .filter((post) => post.data.draft !== true)
  .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf());
---

<Layout>
  <Hero
    title="Turn Your Data into a Competitive Advantage"
    subtitle="We help companies build robust data platforms and extract strategic insights that drive growth and innovation."
    actions={[{ text: 'Discuss Your Data Strategy →', href: '/contact', variant: 'primary' }]}
    image={{
      src: heroMainImage,
      alt: 'Data strategy meeting',
    }}
  />

  <Features2
    title="Our Strategic Services"
    subtitle="We focus on three key pillars to deliver business value across the entire data lifecycle."
    columns={3}
    items={[
      { title: 'Data Platform & Engineering', description: 'Design and implementation of modern data platforms (GCP, AWS)...', icon: 'tabler:database' },
      { title: 'Data Science & AI Strategy', description: 'Leveraging predictive modeling and modern AI applications (GenAI/RAG)...', icon: 'tabler:brain' },
      { title: 'Product & Commercial Analytics', description: 'Deep analysis of user behavior and market data to inform your product roadmap...', icon: 'tabler:chart-line' },
    ]}
  />

  <section class="section py-20 bg-gray-50 dark:bg-slate-800">
    <div class="container mx-auto px-4">
      <h2 class="text-3xl font-bold text-center mb-2">Thought Leadership & Analysis</h2>
      <p class="text-center text-gray-600 dark:text-gray-400 mb-12">
        Here I share frameworks, best practices, and analysis on data strategy, engineering, and the business impact of AI.
      </p>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
        {posts.slice(0, 3).map((post) => (
          <a href={`/articles/${post.slug}`} class="block border border-gray-200 dark:border-gray-700 rounded-lg p-6 hover:border-blue-600 transition bg-white dark:bg-slate-900 h-full">
            {post.data.image && (
              <img src={post.data.image} alt={post.data.title || ''} class="rounded-md mb-4 w-full h-40 object-cover" />
            )}
            <h3 class="text-xl font-bold mb-2 text-gray-900 dark:text-white">{post.data.title}</h3>
            <p class="text-gray-600 dark:text-gray-400">{post.data.excerpt}</p>
          </a>
        ))}
      </div>
      <div class="text-center mt-12">
        <a href="/articles" class="btn">View all articles →</a>
      </div>
    </div>
  </section>
</Layout>